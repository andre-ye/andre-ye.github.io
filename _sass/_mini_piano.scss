// Piano keyboard - flows within parent container (profile or image box)
.piano-keyboard {
  position: relative;
  height: 80px;
  display: flex;
  gap: 2px;
  margin-top: 10px;
  width: 100%;
  opacity: 0.9;
  transition: opacity 0.3s ease;

  &:hover {
    opacity: 1;
  }

  // Hide on mobile
  @media (max-width: 820px) {
    display: none !important;
  }
}

// White keys - more red tint
.piano-key {
  flex: 1;
  background: linear-gradient(180deg, #ffeeee 0%, #ffcccc 100%);
  border: 2px solid #ff4444;
  border-radius: 0 0 4px 4px;
  cursor: pointer;
  position: relative;
  transition: all 0.15s ease;
  box-shadow:
    0 3px 6px rgba(0, 0, 0, 0.3),
    inset 0 0 15px rgba(255, 68, 68, 0.15);

  // First key needs left border visible
  &:first-child {
    border-left: 2px solid #ff4444;
  }

  &:hover {
    background: linear-gradient(180deg, #ffdddd 0%, #ffbbbb 100%);
    box-shadow:
      0 3px 8px rgba(255, 68, 68, 0.5),
      inset 0 0 20px rgba(255, 68, 68, 0.25);
  }

  &:active,
  &.active {
    background: linear-gradient(180deg, #ff6666 0%, #ff4444 100%);
    transform: translateY(2px);
    box-shadow:
      0 2px 4px rgba(0, 0, 0, 0.3),
      0 0 25px rgba(255, 68, 68, 0.7);
  }

  .key-label {
    display: none;
  }
}

// Black keys - more red
.piano-key.black {
  position: absolute;
  width: 8%;
  height: 55px;
  background: linear-gradient(180deg, #550000 0%, #220000 100%);
  border: 2px solid #ff4444;
  border-radius: 0 0 3px 3px;
  z-index: 2;
  box-shadow:
    0 3px 6px rgba(0, 0, 0, 0.5),
    inset 0 0 10px rgba(255, 68, 68, 0.2);

  &:hover {
    background: linear-gradient(180deg, #660000 0%, #330000 100%);
    box-shadow:
      0 3px 8px rgba(255, 68, 68, 0.4),
      inset 0 0 15px rgba(255, 68, 68, 0.3);
  }

  &:active,
  &.active {
    background: linear-gradient(180deg, #ff4444 0%, #cc0000 100%);
    box-shadow:
      0 2px 4px rgba(0, 0, 0, 0.4),
      0 0 25px rgba(255, 68, 68, 0.8);
  }

  .key-label {
    display: none;
  }
}

// Black key positions (percentage based for flexibility)
.piano-key.black[data-note="C#"] { left: calc(12.5% - 4%); }
.piano-key.black[data-note="D#"] { left: calc(25% - 4%); }
.piano-key.black[data-note="F#"] { left: calc(50% - 4%); }
.piano-key.black[data-note="G#"] { left: calc(62.5% - 4%); }
.piano-key.black[data-note="A#"] { left: calc(75% - 4%); }

// Mute button - floating in vertical column with info and cats buttons
#piano-mute-button {
  position: fixed;
  bottom: 80px; // Above info button (which is at 20px)
  left: 20px; // Same column as info button
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, #4a0000 0%, #800000 100%);
  border: 2px solid #ff4444;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: 20px;
  font-weight: bold;
  color: #ff4444;
  cursor: pointer;
  z-index: 10000;
  box-shadow:
    0 0 20px rgba(255, 68, 68, 0.5),
    0 0 40px rgba(255, 68, 68, 0.3),
    0 0 60px rgba(255, 68, 68, 0.1),
    inset 0 0 20px rgba(255, 68, 68, 0.1);
  transition: all 0.3s ease;
  text-shadow: 0 0 10px #ff4444;

  &:hover {
    transform: scale(1.1);
    box-shadow:
      0 0 30px rgba(255, 68, 68, 0.7),
      0 0 50px rgba(255, 68, 68, 0.4),
      0 0 70px rgba(255, 68, 68, 0.2),
      inset 0 0 30px rgba(255, 68, 68, 0.2);
  }

  &.muted {
    opacity: 0.5;
  }

  // Hide on mobile (piano is hidden, so mute button is useless)
  @media (max-width: 767px) {
    display: none !important;
  }
}

// Dark mode adjustments - even more red glow
html[data-theme='dark'] {
  .piano-key {
    background: linear-gradient(180deg, #4a3030 0%, #3a2020 100%);
    border-color: #ff4444;
    box-shadow:
      0 3px 6px rgba(0, 0, 0, 0.4),
      inset 0 0 15px rgba(255, 68, 68, 0.2);

    &:hover {
      box-shadow:
        0 3px 8px rgba(255, 68, 68, 0.5),
        inset 0 0 20px rgba(255, 68, 68, 0.3);
    }

    &:active,
    &.active {
      background: linear-gradient(180deg, #ff6666 0%, #ff4444 100%);
      box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.3),
        0 0 25px rgba(255, 68, 68, 0.8);
    }
  }

  .piano-key.black {
    background: linear-gradient(180deg, #2a0000 0%, #000 100%);
    border-color: #ff4444;
    box-shadow:
      0 3px 6px rgba(0, 0, 0, 0.6),
      inset 0 0 12px rgba(255, 68, 68, 0.25);

    &:hover {
      box-shadow:
        0 3px 8px rgba(255, 68, 68, 0.4),
        inset 0 0 15px rgba(255, 68, 68, 0.35);
    }

    &:active,
    &.active {
      box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.4),
        0 0 25px rgba(255, 68, 68, 0.9);
    }
  }
}
